 R in Action
R语言实战

本书的封面图片标题是“来自扎达尔的男人”。这张图片取自19世纪中期Nikola Arsenovic的一本克罗地亚传统服饰图集的复刻版，由克罗地亚斯普利特的Ethnographic博物馆在2003年出版。图片由Ethnographic博物馆一位热心的图书管理员提供。斯普利特在中世纪时是罗马帝国的核心。从大概公元304年起，卸任的帝国国王戴克里安（Diocletian）所居住的皇宫就在这里。这本书中涵盖了克罗地亚各个地区色彩斑斓的图片，并对服饰和日常生活进行了介绍。



本书的封面图片标题是“来自扎达尔的男人”。这张图片取自19世纪中期Nikola Arsenovic的一本克罗地亚传统服饰图集的复刻版，由克罗地亚斯普利特的Ethnographic博物馆在2003年出版。图片由Ethnographic博物馆一位热心的图书管理员提供。斯普利特在中世纪时是罗马帝国的核心。从大概公元304年起，卸任的帝国国王戴克里安（Diocletian）所居住的皇宫就在这里。这本书中涵盖了克罗地亚各个地区色彩斑斓的图片，并对服饰和日常生活进行了介绍。



https://zh.wikipedia.org/wiki/%E6%89%8E%E9%81%94%E7%88%BE


# 第一部分 入门

## 第1章 R语言介绍

### 1.1 为何要使用R

#### R是免费的！

#### R提供了全面的统计研究平台和多种数据分析技术

#### R包含了其他软件中尚未可用的、先进的统计计算例程

#### R是一个可进行交互式数据分析和探索的强大平台

#### R拥有顶尖水准的制图功能

#### R可以从多个数据源获取数据并转换

#### R的功能可以被整合进其他语言编写的应用程序

#### R可以运行在多个平台之上

### 1.2 R的安装

#### CRAN http://cran.r-project.org

#### RStudio

##### Clear Console: cat("\014")

##### Configure Working Directory

###### 1. setwd() function

###### 2. Tools - global options

###### 3. Startup script: etc\Rprofile.site

* .first <- function() {
    setwd("directory")
}

### 1.3 熟悉R语言

#### 1.3.1 新手上路

#### 1.3.2 获取帮助

#### 1.3.3 工作空间

##### getwd(): 显示当前工作目录

##### setwd("mydir"): 修改当前工作目录为mydir

##### ls(): 列出当前工作空间中的对象

##### rm(objectlist): 移除（删除）一个或多个对象

##### rm(list = ls()): 移除（删除）全部对象

##### help(options): 显示可用选项的说明

##### options(): 显示或设置当前选项

##### history(#): 显示最近使用过的#个命令（默认为25）

##### cat("\014"): 打开httpd帮助服务器

##### Ctrl+L: clear console

##### q(): 退出R

#### 1.3.4 输入和输出

##### 1. 输入

###### source("filename")

##### 2. 文本输出

###### sink("filename", append=, split=)

##### 3. 图形输出

###### bmp("filename.bmp")

###### jpeg("filename.jpg")

###### pdf("filename.pdf")

###### png("filename.png")

###### postscript("filename.ps")

###### svg("filename.svg")

###### win.metafile("filename.wmf")

###### finally, use dev.off() to return output to screen

#### Tips

##### Change GUI Language

###### Use "dir Rconsole /s" to find out all Rconsole file

###### /etc/Rconsole, set language = EN

### 1.4 R的包

#### 1.4.1 包的概念

##### 包是R函数、数据、预编译代码以一种定义完善的格式组成的集合。计算机上存储包的名录称为库(library)

##### Function.libPaths()

##### search()

#### 1.4.2 包的安装

##### install.packages()

###### 不加参数将显示一个CRAN镜像站点的列表

###### install.packages("packageName",dependencies = TRUE, repos = 'http://cran.rstudio.com/')

##### update.packages()

##### installed.packages()

##### remove.packages("package_name")

#### 1.4.3 包的载入

##### Locd: library(packageName)

##### Unload: detach("package:packageName", unload=TRUE)

#### 1.4.4 包的使用

##### help(package="package_name")

## 第2章 创建数据集

### 2.1 数据集的概念

#### 统计学家：观测(observation)和变量(variable)

#### 数据库分析师：记录(record)和字段(field)

#### 数据挖掘和机器学习研究者：示例(example)和属性(attribute)

### 2.2 数据结构

#### 2.2.0 标量 (scalar)
 (see:2.2.3 数组 (array))
##### 标量是只含一个元素的向量

#### 2.2.1 向量 (vector)
 (see:2.2.3 数组 (array))
##### 用于存储数值型、字符型或逻辑性数据的一维数组

##### 执行组合功能的函数 c() 用来创建向量

##### 单个向量中的数据必须拥有相同的类型或模式

##### 注：R的向量的序号是从1开始计算的

#### 2.2.2 矩阵 (matrix)
 (see:2.2.3 数组 (array))
##### 矩阵是一个二维数组，只是每个元素都拥有相同的模式

##### 通过函数 matrix() 创建矩阵

myymatrix ＜- matrix(

    vector,

    nrow=number_of_rows,

    ncol=number_of_columns,

    byrow=logical_value,

    dimnames=list(

        char_vector_rownames,

        char_vector_colnames

    )

)


#### 2.2.3 数组 (array)

##### 数组（array）与矩阵类似，但是维度可以大于2

##### 数组可通过 array() 函数创建

myarray <- array(vector, dimensions, dimnames)


#### 2.2.4 数据框 (data frame)

##### 不同的列可以包含不同模式的数据

##### 数据框可通过函数 data.frame() 创建

mydata <- data.frame(col1, col2, col3, ...)


##### attach(): 将数据框添加到R的搜索路径中

##### detach()

##### with()

##### 实例标识符 (case identifier)

###### 可通过数据框操作函数中的rowname选项指定

#### 2.2.5 因子 (Factor)

##### 类别（名义型）变量和有序类别（有序型）变量在R中称为因子（factor）

##### 函数factor()以一个整数向量的形式存储类别值，整数的取值范围是[1...k]（其中k是名义型变量中唯一值的个数），同时一个由字符串（原始值）组成的内部向量将映射到这些整数上。

##### 数值型变量可以用levels和labels参数来编码成因子

#### 2.2.6 列表 (list)

##### 列表就是一些对象（或成分，component）的有序集合。列表允许你整合若干（可能无关的）对象到单个对象名下。

##### 使用函数 list() 创建列表

### 2.3 数据的输入

#### 2.3.1 使用键盘输入数据

##### 用R内置的文本编辑器

###### edit()

##### 直接在代码中嵌入数据

#### 2.3.2 从带分隔符的文本文件导入数据

##### mydataframe <- read.table(file, options)
 (see:直接在代码中嵌入数据)
###### options:

#### 2.3.3 导入Excel数据

##### install.packages("xlsx")
myDF <- read.xlsx("path\filename", 1)

#### 2.3.4 导入XML数据

#### 2.3.5 从网页抓取数据

#### 2.3.6 导入SPSS数据

#### 2.3.7 导入SAS数据

#### 2.3.8 导入Stata数据

#### 2.3.9 导入NetCDF数据

#### 2.3.10 导入HDF5数据

#### 2.3.11 访问数据框管理系统

##### 1. ODBC接口

##### 2. DBI相关包

#### 2.3.12 通过Stat/Transfer导入数据

### 2.4 数据集的标注

#### 2.4.1 变量标签

#### 2.4.2 值标签

### 2.5 处理数据对象的实用函数

## 第3章 图形初阶

### 3.1 使用图形

### 3.2 一个简单的例子

### 3.3 图形参数

#### 3.3.1 符号和线条

##### plot(x-axis, y-axis, type="", lty=, lwd=, pch=, cex=)

#### 3.3.2 颜色

#### 3.3.3 文本属性

##### par(font.lab=3, cex.lab=1.5, font.main=4, cex.main=2)

#### 3.3.4 图形尺寸和边界尺寸

### 3.4 添加文本、自定义坐标轴和图例

#### 3.4.1 标题

#### 3.4.2 坐标轴

#### 3.4.3 参考线

#### 3.4.4 图例

#### 3.4.5 文本标注

#### 3.4.6 数学标注

##### demo(plotmath)

### 3.5 图形的组合

#### par() or layout()

## 第4章 基本数据管理

### 4.1 一个示例

### 4.2 创建新变量

### 4.3 变量的重编码

### 4.4 变量的重命名

### 4.5 缺失值
 (see:第18章 处理缺失数据的高级方法)
### 4.6 日期值

### 4.7 类型转换

### 4.8 数据排序

### 4.9 数据集的合并

### 4.10 数据集取子集

### 4.11 使用SQL语句操作数据框

## 第5章 高级数据管理

### 5.1 一个数据处理难题

### 5.2 数值和字符处理函数

### 5.3 数据处理难题的一套解决方案

### 5.4 控制流

### 5.5 用户自编函数

### 5.6 整合与重构

# 第二部分 基本方法

## 第6章 基本图形

### 6.1 条形图

### 6.2 饼图

### 6.3 直方图

### 6.4 核密度图

### 6.5 箱线图

### 6.6 点图

## 第7章 基本统计分析

### 7.1 描述性统计分析

### 7.2 频数表核列联表

### 7.3 相关

### 7.4 t检验

### 7.5 组间差异的非参数检验

### 7.6 组间差异的可视化

# 第三部分 中级方法

## 第8章 回归

### 8.1 回归的多面性

### 8.2 OLS回归

### 8.3 回归诊断

### 8.4 异常观测值

### 8.5 改进措施

### 8.6 选择“最佳”的回归模型

### 8.7 深层次分析

## 第9章 方差分析

### 9.1 术语速成

### 9.2 ANOVA模型拟合

### 9.3 单因素方差分析

### 9.4 单因素协方差分析

### 9.5 双因素方差分析

### 9.6 重复测量方差分析

### 9.7 多元方差分析

### 9.8 用回归来做ANOVA

## 第10章 功效分析

### 10.1 假设检验速览

### 10.2 用pwr包做功效分析

### 10.3 绘制功效分析图形

### 10.4 其他软件包

## 第11章 中级绘图

### 11.1 散点图

### 11.2 折线图

### 11.3 相关图

### 11.4 马赛克图

## 第12章 重抽样与自助法

### 12.1 置换检验

### 12.2 用coin包做置换检验

### 12.3 ImPerm包的置换检验

### 12.4 置换检验点评

### 12.5 自助法

### 12.6 boot包中的自助法

# 第四部分 高级方法

## 第13章 广义线性模型

### 13.1 广义线性模型和glm()函数

### 13.2 Logistic回归

### 13.3 泊松回归

## 第14章 主成分分析和因子分析

### 14.1 R中的主成分和因子分析

### 14.2 主成分分析

### 14.3 探索性因子分析

### 14.4 其他潜变量模型

## 第15章 时间序列

### 15.1 在R中生成时序对象

### 15.2 时序的平滑化和季节性分解

### 15.3 指数预测模型

### 15.4 ARIMA预测模型

## 第16章 聚类分析

### 16.1 聚类分析的一般步骤

### 16.2 计算距离

### 16.3 层次聚类分析

### 16.4 划分聚类分析

### 16.5 避免不存在的类

## 第17章 分类

### 17.1 数据准备

### 17.2 逻辑回归

### 17.3 决策树

### 17.4 随机森林

### 17.5 支持向量机

### 17.6 选择预测效果最好的解

### 17.7 用rattle包进行数据挖掘

## 第18章 处理缺失数据的高级方法

### 18.1 处理缺失值的步骤

### 18.2 识别缺失值

### 18.3 探索缺失值模式

### 18.4 理解缺失数据的来由和影响

### 18.5 理性处理不完整数据

### 18.6 完整实例分析（行删除）

### 18.7 多重插补

### 18.8 处理缺失值的其他方法

# 第五部分 技能拓展

## 第19章 使用ggplot2进行高级绘图

### 19.1 R中的四种图形系统

### 19.2 ggplot2包介绍

### 19.3 用几何函数指定图的类型

### 19.4 分组

### 19.5 刻面

### 19.6 添加光滑曲线

### 19.7 修改ggplot2图形的外观

### 19.8 保存图形

## 第20章 高级编程

### 20.1 R语言回顾

### 20.2 环境

### 20.3 面向对象的编程

### 20.4 编写有效的代码

### 20.5 调试

### 20.6 深入学习

## 第21章 创建包

### 21.1 非参分析和npar包

### 21.2 开发包

### 21.3 创建包的文档

### 21.4 建立包

### 21.5 深入学习

## 第22章 创建动态报告

### 22.1 用模版生成报告

### 22.2 用R和Markdown创建动态报告

### 22.3 用R和LaTeX创建动态报告

### 22.4 用R和Open Document创建动态报告

### 22.5 用R和Microsoft Word创建动态报告

## 第23章 使用lattice进行高级绘图

### 23.1 lattice包

### 23.2 调节变量

### 23.3 面板函数

### 23.4 分组变量

### 23.5 图形参数

### 23.6 自定义图形条带

### 23.7 页面布局
